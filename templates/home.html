<html>

<head>
<link rel=stylesheet type=text/css href="{{ url_for('static', filename='styles.css') }}">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="https://apis.google.com/js/platform.js" async defer></script>
<meta name="google-signin-client_id" content="801689158274-gikf3j7bul5evn4gl2fr43lhtahu20dn.apps.googleusercontent.com">
</head>

<body>
<div class = 'pane quarter'>
	<h1>Great Medieval Weapons Catalog</h1>

	<h3></h3></br>
	<p><a href="{{url_for('loginSession')}}">Login</a></p>
	<p><a href="{{url_for('logout')}}">Logout</a></p>
	<a id="SignUp" href="{{url_for('newUser')}}">Sign up</a>
	</br>
	</br>
	<div class="g-signin2" data-onsuccess="onSignIn"></div>
	<a id="Glogout" class="glogout" href="#" onclick="signOut();">Sign out</a>

 <div class="itemspane">

		<a href="{{ url_for('newCategory')}}" > <h3> Create a New Category </h3> </a>

		{% for category in categories %}

		<p><a class="category" href = "{{url_for('showCat', category_id = category.id)}}">{{category.name}}</a></p>

		<p><a id="EditC" href = "{{url_for('editCategory', category_id = category.id)}}">Edit Category</a></p>

		<p> <a id="DelC" href = "{{url_for('deleteCategory', category_id = category.id)}}">Delete Category</a></p>


		{% endfor %}

	</div>

</div>

<script type="text/javascript">
	$('#Glogout').hide();

	function onSignIn(googleUser) {
		var profile = googleUser.getBasicProfile();
		var mail = profile.getEmail();
		$('#Glogout').show();
		$.ajax({
			type: "POST",
			url: "/gconnect",
			data: {mail:mail},
		});
	}

	function signOut() {
		var auth2 = gapi.auth2.getAuthInstance();
		auth2.signOut().then(function () {
			console.log('User signed out.');
		});
		$('#Glogout').hide();
	}
</script>
</body>

</html>
